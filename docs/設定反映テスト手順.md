# 設定反映テスト手順

## テスト目的
設定画面で表示項目を変更した際に、ファイルリストに正しく反映されることを確認する。

## 前提条件
- ファイルマネージャーアプリケーションが起動している
- コンソール出力が確認できる状態

## テスト手順

### 1. 初期状態の確認
1. アプリケーションを起動
2. メニューバー「表示」→「詳細表示」を選択
3. コンソール出力で以下を確認：
   ```
   update_column_visibility呼び出し: view_mode=detail
   列数: 10, visible_columns: {...}
   ```

### 2. 設定画面での変更
1. メニューバー「ファイル」→「設定」を選択
2. 「表示」タブを選択
3. 以下のチェックボックスを変更：
   - 「サイズを表示」: チェック外す
   - 「権限を表示」: チェック入れる
   - 「作成日時を表示」: チェック入れる
4. 「OK」ボタンをクリック

### 3. 変更後の確認
コンソール出力で以下が表示されることを確認：
```
設定ダイアログでOKが押されました
QSettingsに表示設定を保存しました
親ウィジェットのvisible_columnsを更新: {...}
ファイルシステムモデルの設定も更新しました
列表示を即座に更新しました
設定を再読み込み: visible_columns={...}
詳細表示モードに切り替えます (必要に応じて)
ファイルシステムモデルに設定を反映しました
update_column_visibility呼び出し: view_mode=detail
列表示を更新完了: {...}
=== 現在の列状態 ===
  OK 列1(size): 非表示 / 期待: 非表示
  OK 列4(permissions): 表示 / 期待: 表示
  OK 列5(created): 表示 / 期待: 表示
設定画面での変更を完全に反映しました
```

### 4. 視覚的確認
ファイルリストのヘッダーで以下を確認：
- サイズ列が非表示になっている
- 権限列が表示されている
- 作成日時列が表示されている

## 期待結果
- 設定画面での変更が即座にファイルリストに反映される
- コンソール出力に「OK」ステータスが表示される
- 視覚的にも列の表示/非表示が正しく反映される

## トラブルシューティング

### 問題1: 列が反映されない
**症状**: 設定を変更してもファイルリストに反映されない
**対処法**: 
1. コンソール出力を確認
2. `update_column_visibility呼び出し`が表示されているか確認
3. `列表示を更新完了`が表示されているか確認

### 問題2: エラーが発生する
**症状**: 設定変更時にエラーメッセージが表示される
**対処法**:
1. コンソール出力のエラーメッセージを確認
2. 詳細表示モードになっているか確認
3. アプリケーションを再起動して再テスト

### 問題3: 一部の列のみ反映される
**症状**: 一部の設定のみ反映される
**対処法**:
1. `=== 現在の列状態 ===`の出力を確認
2. NGステータスの列があるか確認
3. `visible_columns`の値を確認
