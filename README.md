# GUIファイラー開発プロジェクト

## プロジェクト概要

このプロジェクトは、WindowsおよびMacの両プラットフォームで動作するクロスプラットフォーム対応のGUIファイラー（ファイルマネージャー）を開発することを目的としています。

## プロジェクトの目標

- **クロスプラットフォーム対応**: WindowsとMacの両方でシームレスに動作するアプリケーションを提供
- **ユーザーフレンドリーなインターフェース**: 直感的で使いやすいGUIを設計
- **高性能**: 大量のファイルやフォルダを迅速に処理できる性能を目指す
- **拡張性**: 将来的な機能追加に対応できる柔軟なアーキテクチャ

## 推奨技術スタック候補

WindowsとMacの両方で動作するクロスプラットフォームのGUIアプリケーションを開発するためのプログラミング言語とフレームワークの候補を以下に示します。

### 1. Python + PyQt6/PySide6

**概要**: Pythonの豊富なライブラリエコシステムと、Qtフレームワークの強力なGUI機能を組み合わせた選択肢

**メリット**:
- Pythonのシンプルで読みやすい構文
- 豊富なライブラリとコミュニティサポート
- Qtの成熟したGUIフレームワーク
- クロスプラットフォーム対応（Windows、Mac、Linux）
- ファイル操作に優れた標準ライブラリ

**デメリット**:
- 実行時のパフォーマンスが他の言語に比べて劣る場合がある
- アプリケーションサイズが大きくなる可能性

**適用場面**: プロトタイプ開発、中規模アプリケーション、Pythonに慣れている開発チーム

### 2. C# + .NET MAUI

**概要**: Microsoftが提供する.NET MAUI（Multi-platform App UI）を使用したネイティブアプリ開発

**メリット**:
- 単一のコードベースで複数プラットフォームに対応
- Microsoftの公式サポートと豊富なドキュメント
- ネイティブレベルのパフォーマンス
- Visual Studioとの優れた統合

**デメリット**:
- 学習コストが高い
- 比較的新しい技術のため、コミュニティやライブラリの成熟度が低い場合がある
- Microsoftエコシステムへの依存

**適用場面**: エンタープライズアプリケーション、Microsoft技術スタックを使用しているチーム

### 3. JavaScript + Electron

**概要**: Web技術（HTML、CSS、JavaScript）を使用したクロスプラットフォームデスクトップアプリ開発

**メリット**:
- Web技術を活用できるため、学習コストが低い
- 豊富なライブラリと活発なコミュニティ
- 迅速なプロトタイピングが可能
- 既存のWebアプリケーションからの移行が容易

**デメリット**:
- アプリケーションサイズが大きくなりがち
- メモリ使用量が多い
- パフォーマンスがネイティブアプリに比べて劣る場合がある

**適用場面**: Web開発者チーム、迅速な開発が必要な場合、既存のWeb技術を活用したい場合

### 4. Dart + Flutter

**概要**: Googleが開発したFlutterフレームワークを使用したクロスプラットフォームアプリ開発

**メリット**:
- 単一のコードベースで複数プラットフォームに対応
- 高いパフォーマンスと美しいUI
- ホットリロード機能による開発効率の向上
- Googleのサポートと活発なコミュニティ

**デメリット**:
- Dart言語の学習が必要
- デスクトップアプリケーションのサポートが比較的新しい
- アプリケーションサイズが大きくなる可能性

**適用場面**: モバイルアプリとの統一性を重視する場合、高性能なUIが必要な場合

### 5. Python + Tkinter

**概要**: Pythonの標準ライブラリに含まれるTkinterを使用したシンプルなGUI開発

**メリット**:
- Pythonの標準ライブラリに含まれているため、追加インストール不要
- シンプルで学習しやすい
- 軽量で高速な起動

**デメリット**:
- 見た目が古い
- カスタマイズ性が限定的
- モダンなUIデザインには不向き

**適用場面**: プロトタイプ開発、シンプルなアプリケーション、学習目的

### 6. Java + JavaFX

**概要**: Javaのクロスプラットフォーム性とJavaFXのリッチなGUI機能を活用

**メリット**:
- Javaの成熟したエコシステム
- クロスプラットフォーム対応
- 豊富なライブラリとツール
- エンタープライズレベルの安定性

**デメリット**:
- 起動時間が長い
- メモリ使用量が多い
- モダンな開発環境に比べて開発効率が劣る場合がある

**適用場面**: エンタープライズアプリケーション、Java技術スタックを使用しているチーム

## 推奨構成

### 初心者向け: Python + PyQt6/PySide6
- 学習コストが低く、豊富なリソースが利用可能
- ファイル操作に優れたPythonの標準ライブラリを活用
- プロトタイプから本格的なアプリケーションまで対応可能

### パフォーマンス重視: C# + .NET MAUI
- ネイティブレベルのパフォーマンス
- Microsoftの公式サポート
- エンタープライズレベルの品質

### 迅速な開発: JavaScript + Electron
- Web技術を活用した迅速な開発
- 豊富なライブラリとコミュニティサポート
- 既存のWeb技術を活用可能

## 開発環境

### 推奨IDE
- **Visual Studio Code**: 軽量でクロスプラットフォーム対応
- **PyCharm**: Python開発に特化（Python選択時）
- **Visual Studio**: .NET開発に最適（C#選択時）
- **IntelliJ IDEA**: Java開発に最適（Java選択時）

### バージョン管理
- **Git**: ソースコードのバージョン管理
- **GitHub/GitLab**: リモートリポジトリ

## プロジェクト構造

```
file_manager/
├── README.md
├── requirements.txt
├── setup.py
├── run.py                    # アプリケーション実行スクリプト
├── build_exe.py             # PyInstaller用ビルドスクリプト
├── src/
│   ├── main.py              # メインアプリケーション
│   └── file_manager.py      # ファイルマネージャーウィジェット
├── assets/
│   ├── icons/               # アイコンファイル（将来追加）
│   └── images/              # 画像ファイル（将来追加）
├── tests/                   # テストファイル（将来追加）
├── 要件定義.md
└── .gitignore
```

## 開発の進め方

1. **要件定義**: 必要な機能や仕様を明確にする
2. **技術選定**: 上記の候補から最適な言語とフレームワークを選択
3. **設計**: アプリケーションのアーキテクチャやUIデザインを設計
4. **実装**: 設計に基づいてコーディングを行う
5. **テスト**: 各プラットフォームでの動作確認とバグ修正を行う
6. **リリース**: 正式版として公開し、ユーザーフィードバックを収集

## 実装済み機能

### 基本機能
- ✅ ファイル・フォルダの表示とナビゲーション
- ✅ 左ペイン: フォルダツリー表示（QTreeView + QFileSystemModel）
- ✅ 右ペイン: ファイル一覧表示（QListView）
- ✅ ダブルクリックでのフォルダ遷移
- ✅ ファイルの削除、名前変更
- ✅ 新規フォルダ作成
- ✅ ソート機能（名前、サイズ、更新日、種類）
- ✅ リスト表示／アイコン表示切替
- ✅ ファイル名検索機能
- ✅ コンテキストメニュー対応
- ✅ ドラッグ＆ドロップ対応（基本）

### 将来実装予定
- ファイルのコピー、移動（クリップボード操作）
- ファイルのプレビュー機能
- タブ機能による複数フォルダの同時表示
- お気に入り／ブックマーク登録
- ZIP圧縮・解凍
- ショートカットキーのカスタマイズ
- 多言語対応（日本語／英語）

## 使用方法

### 開発環境での実行

1. **依存関係のインストール**
   ```bash
   pip install -r requirements.txt

   # OpenCV ベースの動画ダイジェストを有効にしたい場合は、別途次の追加パッケージをインストールしてください。
   pip install opencv-python numpy
   # OpenCV を入れない場合はプレースホルダーのサムネイルが表示されます。
   ```

2. **アプリケーションの実行**
   ```bash
   python run.py
   ```

### 実行ファイルの作成

1. **PyInstallerのインストール**
   ```bash
   pip install pyinstaller
   ```

2. **実行ファイルのビルド**
   ```bash
   python build_exe.py
   ```

3. **ビルドファイルのクリーンアップ**
   ```bash
   python build_exe.py clean
   ```

### 操作方法

- **フォルダ移動**: 左ペインのツリーまたは右ペインのフォルダをダブルクリック
- **上へ移動**: ツールバーの「↑」ボタンをクリック
- **表示切替**: ツールバーの「リスト表示」/「アイコン表示」を選択
- **ソート**: ツールバーのソート選択ボックスを使用
- **検索**: ツールバーの検索ボックスにファイル名を入力
- **ファイル操作**: 右クリックでコンテキストメニューを表示

## 貢献方法

1. このリポジトリをフォーク
2. 新しいブランチを作成 (`git checkout -b feature/新機能`)
3. 変更をコミット (`git commit -m '新機能の追加'`)
4. ブランチをプッシュ (`git push origin feature/新機能`)
5. プルリクエストを作成

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 連絡先

プロジェクトに関する質問や提案がある場合は、Issueを作成してください。

## 近況アップデート（2025-09）

本アプリに以下の機能を追加・改善しました。

- 動画ダイジェスト表示（OpenCV任意）
  - 動画ファイル選択時にポップアップでダイジェスト（サムネイル）を表示
  - 設定画面に「動画ダイジェスト」タブを追加（サムネイル数・サイズ・自動表示）
  - OpenCV 未導入環境では機能を自動的に無効化し、ユーザーに案内を表示

- 同一動画ファイル検出とゴミ箱移動
  - フォルダ内の動画を「ファイルサイズ一致」または「ファイル名類似度」でグルーピング
  - 類似度しきい値（0.50–1.00）をスライダーで調整可能
  - 比較画面に各ファイルのチェックボックスを配置し、選択したファイルを「ゴミ箱に移動」
  - Windowsは winshell、macOS/Linux は send2trash を使用（未導入時はフォールバック）
  - バックグラウンドスレッドで検出し、UIは常に応答

- ファイル検索（インデックス）
  - SQLite を用いたインデックス作成・更新・キーワード検索ダイアログを追加
  - 大規模フォルダでも高速検索が可能

- ディスク使用量分析（円グラフ）
  - ドライブ単位の使用量を円グラフで可視化
  - 任意フォルダを選ぶと、その配下のフォルダ/ファイルをサイズ比で表示
  - 小さい項目は「その他」に自動集約（既定: 1MB 未満）

- UI 改善
  - 左ドライブボタンを小型化（30x25・10px）
  - 動画比較画面の上部余白を整理し、操作エリアに集約

## 使い方（新機能）

- 動画ダイジェスト表示
  1) 動画ファイルを選択するとポップアップでダイジェストを表示（設定で自動表示ONの場合）
  2) 設定 → 動画ダイジェスト からサムネイル数/サイズ/自動表示を調整

- 同一動画ファイル検出
  1) ツールバーの「同一動画」ボタン、またはフォルダの右クリックメニューから起動
  2) 左のグループリストでグループを選択 → 右側で各動画のチェックボックスをON
  3) 「選択したファイルをゴミ箱に移動」を押下
  4) 検出タイプは「ファイルサイズ」「ファイル名類似性」から選択、類似度はスライダーで調整

- ファイル検索（インデックス）
  1) ツールバーの検索ボタンから検索ダイアログを開く
  2) 必要に応じてインデックスの作成/更新を実行
  3) キーワードで検索して結果をダブルクリックで開く

- ディスク使用量分析
  1) ツールバーの「📊」ボタン、またはフォルダの右クリック「ディスク使用量分析」
  2) ドライブ選択→分析開始。円グラフの扇形や右のリストを操作してドリルダウン
  3) 「← 戻る」で一つ上の階層へ

## 依存関係（オプション）

以下は任意導入です。未導入でもアプリは起動します（関連機能は自動無効化）。

- opencv-python (>=4.8.0)、numpy (>=1.24.0): 動画ダイジェスト
- winshell (>=1.0.228): Windows のゴミ箱
- send2trash (>=1.8.2): macOS/Linux のゴミ箱

インストール例:

```bash
pip install opencv-python numpy
pip install winshell
pip install send2trash
```

## トラブルシューティング

- ModuleNotFoundError: No module named 'cv2'
  - OpenCV が未導入です。上記コマンドでインストールするか、動画ダイジェスト機能をOFFのまま利用してください。

- 「選択したファイルをゴミ箱に移動」ボタンが無効のまま
  - 比較画面で各動画のチェックボックスにチェックを入れてください。チェック操作直後にボタンが有効化されます。

## スクリーンショット / GIF

以下は機能のイメージです。`assets/screenshots/` 配下に画像/GIF を配置してください。

> 画像はリポジトリに同梱するか、外部CDNのURLに差し替えてください。

### トップ画面（ファイル一覧）
![トップ画面](assets/screenshots/top.png)

### 動画ダイジェスト表示
![動画ダイジェスト](assets/screenshots/video_digest.png)

### 同一動画ファイル検出（サイズ一致/ファイル名類似性）
![同一動画検出](assets/screenshots/duplicate_detection.png)

### ゴミ箱移動（比較画面）
![ゴミ箱移動](assets/screenshots/move_to_trash.gif)

### ファイル検索（インデックス）
![ファイル検索](assets/screenshots/file_search.png)

### ディスク使用量分析（円グラフ）
![ディスク分析](assets/screenshots/disk_analysis.png)

### 左ドライブボタン（小型化）
![ドライブボタン](assets/screenshots/drive_buttons.png)


